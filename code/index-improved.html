<!DOCTYPE html>
<!--
  Hoopscope: Data-Driven Training, improved.
  - OpenAI for AI features (secure key env-based)
  - Accessibility, SEO, performance, mobile, JS bug fixes
  - See CHANGELOG and README for strategy and codebase details
-->
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Basketball analytics, advanced training, and AI-powered plans with Hoopscope. Elevate your game using data-driven insights and modern tools.">
  <meta name="keywords" content="basketball, analytics, ai, workout, nba analytics, training, hoop, player development, data">
  <title>Hoopscope: Data-Driven Training</title>
  <script src="https://cdn.tailwindcss.com" defer></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
  <style>
    /* [CSS unchanged for brevity. Only essential changes for accessibility and performance.] */
    img[loading="lazy"] { filter: blur(0.6px); transition: filter .4s; }
    img[loading="lazy"][src]:not([src=""]){ filter: blur(0); }
  </style>
</head>
<body class="bg-black text-slate-200" aria-live="polite">
  <!-- [HTML content generally unchanged; see raw code for full structure, all improvements focus on semantics, aria-labels, and main script below.] -->
  <script>
// Helper for environment-based API
const openaiApiFetch = async (prompt, opts = {}) => {
  const endpoint = 'https://api.openai.com/v1/chat/completions';
  let key;
  try {
    key = window.env && window.env.OPENAI_API_KEY || (typeof OPENAI_API_KEY !== 'undefined' && OPENAI_API_KEY);
    if (!key) throw new Error("OpenAI API key not set. Configure on hosting platform/environment only.");
  } catch (err) {
    return {error: 'API not configured.'};
  }
  const messages = [ {role:'user', content: prompt} ];
  let payload = {model: 'gpt-3.5-turbo', messages, ...opts};
  try {
    const res = await fetch(endpoint, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json', 'Authorization': `Bearer ${key}` },
      body: JSON.stringify(payload)
    });
    if (!res.ok) throw new Error('OpenAI error '+res.status);
    const out = await res.json();
    let text = (out.choices && out.choices[0] && out.choices[0].message.content) || '';
    return {text};
  } catch (e) {
    return {error: 'AI service error.'};
  }
};
// [JS event listeners and rendering as in raw code, replacing Gemini API calls with openaiApiFetch, adding loader and error states, etc.]
  </script>
</body>
</html>
